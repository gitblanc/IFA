---
title: "P2: Ejercicios de Práctica Forense I"
---
1. Abra una terminal y obtenga la fecha y la hora del sistema intervenido. Compare dicha hora con la hora oficial de España y anote cualquier diferencia

- Buscar en Google "hora oficial de España".

>[!Important]
Anotar por ejemplo: España 12:21 (CEST) UTC +2

- **Ejecutar** `date`: vie 20 sep 2024 12:38:36 CEST

2. Averiguar la versión del kernel y versión del sistema operativo.
	- **Ejecutar** `uname -a` o `cat /etc/os-release`

![](img/Pasted%20image%2020240922205826.png)

3. Obtener un listado de todos los interfaces de red presentes en el sistema y sus características.
	- **Ejecutar** `ifconfig`
	- Calculadora IP: [jodies.de](https://jodies.de/ipcalc)

![](img/Pasted%20image%2020240922205857.png)

4. Obtener el listado de todas las conexiones existentes con la máquina, tanto aquellas de entrada como las de salida. Además, deberá mostrar información de cada una de ellas, como por ejemplo los procesos que las están utilizando
	- **Ejecutar** `netstat -punta`

![](img/Pasted%20image%2020240922205925.png)

5. Averiguar qué usuarios están logueados y cuánto tiempo lleva el sistema arrancado.
	- **Ejecutar** `who; uptime`

![](img/Pasted%20image%2020240922210038.png)

6. Mostrar la información de la tabla de enrutamiento existente.
	- **Ejecutar** `route`

![](img/Pasted%20image%2020240922210108.png)

7. Mostrar los procesos que están corriendo en el sistema de todos los usuarios sin que se corte el nombre del proceso si es más largo que el ancho de la pantalla.
	- **Ejecutar** `ps -acexuww | more`

![](img/Pasted%20image%2020240922210153.png)

![](img/Pasted%20image%2020240922210238.png)

8. Visualizar cuál fue el último acceso de cada usuario al sistema y el registro de accesos de un usuario al sistema. Obtener la lista de accesos fallidos al sistema.
	- **Ejecutar** `last; last usuario; sudo lastb`

![](img/Pasted%20image%2020240922210323.png)

9. Mostrar los ficheros abiertos actualmente en el sistema.
	- **Ejecutar** `sudo lsof | more`

![](img/Pasted%20image%2020240922210359.png)

10. Mostrar información de los sistemas de ficheros que utiliza el equipo en los diferentes discos y las diferentes opciones de montaje.
	- **Ejecutar** `mount | grep /sd`

![](img/Pasted%20image%2020240922210456.png)

11. Obtener las diferentes particiones existentes en el disco duro /dev/sda, así como los sectores de inicio y fin de cada una de ellas.
	- **Ejecutar** `lsblk` o `fdisk -l`

![](img/Pasted%20image%2020240922210528.png)

>[!Important]
>Si tienes una distro Linux como tu Anfitrión, para poder introducir un USB en la máquina virtual, has de ejecutar Virtualbox como root: `sudo virtualbox`

>[!Info]
Para calcular la firma hash de un USB ejecutar: `sudo sha1sum /dev/sdb > hash_pendrive.txt`

12. Averigua qué comando de Linux nos proporciona información sobre si un dispositivo ha sido reconocido por el sistema.
	- **Ejecutar** `lsusb`

![](img/Pasted%20image%2020240922213608.png)

![](img/Pasted%20image%2020240922214308.png)

13. Vaya al icono del menú en la esquina inferior izquierda de la pantalla. Seleccione **Herramientas forenses** y dentro de dicha categoría Hash. Lance la aplicación **QuickHash** y una vez dentro de la misma seleccione la pestaña **Discos**. Pulse el botón que encontrará en dicha pestaña. Despliegue en la ventana que aparecerá la categoría **Discos Físicos**. Seleccione el nombre lógico del dispositivo (`/dev/sdX`) correspondiente al lápiz de memoria y seleccione como función hash **SHA1**. Calcule el hash para dicho dispositivo y almacénelo. Anote el tiempo que tarda en calcular el hash para dicho dispositivo y calcule el tiempo de hash por GB copiado.

|                    | Hash SHA1                                | Tiempo de realización | Tiempo por GB |
| ------------------ | ---------------------------------------- | --------------------- | ------------- |
| Dispositivo Físico | 153C584EA45E399B6DE6DE77B64BA778BF98CAC1 | 00:04:55              | 00:02:275     |

![](img/Pasted%20image%2020240922214623.png)

![](img/Pasted%20image%2020240922215154.png)

![](img/Pasted%20image%2020240922215457.png)

14. Obtén la firma hash del lápiz USB desde línea de comando. Realiza la firma hash utilizando el algoritmo SHA-1 y luego el algoritmo MD5. Almacena cada firma hash en un fichero distinto.
	- Para SHA1 **ejecutar**: `sudo sha1sum /dev/sdb > /home/eduardobb/IFA/P2/sha1sum.txt`

	![](img/Pasted%20image%2020240922215822.png)

	![](img/Pasted%20image%2020240922220330.png)

	- Para MD5 **ejecutar**: `sudo md5sum /dev/sdb > /home/eduardobb/IFA/P2/md5sum.txt`

	![](img/Pasted%20image%2020240922220412.png)

	![](img/Pasted%20image%2020240922220845.png)

15. Averigua cuántas particiones tiene el lápiz USB. Para ello puede utilizar la herramienta Mounter o bien el comando que utilizaste en el ejercicio 11 de esta práctica. Realiza una firma hash del fichero de dispositivo correspondiente a dicha partición, primero utilizando el hash SHA-1 y luego el MD5 y almacena cada firma hash en un fichero distinto. Finalmente, monta dicha partición en modo sólo lectura. Para montar la partición puedes utilizar bien la herramienta Mounter o bien puedes utilizar la línea de comandos.
	- Si ejecutamos `lsblk`, vemos que el usb tiene dos particiones:

![](img/Pasted%20image%2020240922220933.png)

==*¿Es lo mismo que el ej anterior?*==

16. En caso de que el pendrive contuviese una única partición, ¿coincidiría la firma hash de ésta con la firma hash del fichero de dispositivo que representa al lápiz? Razónese la respuesta y demuéstrese empíricamente.

No necesariamente, debido a que sistemas operativos tales como Windows, realizan modificaciones en ciertos registros al insertar y expulsar una unidad Flash Drive. De esta forma, al hacer ciertas escrituras justo después de insertar un USB, se generará una firma hash distinta.